## NNAssignment
#Requirement
1. Write a terraform code that will:
- Creates an Azure container registry
- Creates a function app that will run docker container
- Integrates function app with Azure container registry as source of the deployment
2. Create a pipeline to build the image and push it to azure container registry
3. Create an infra pipeline to provision azure resource from terraform code

#Remarks
Integration function app with Azure container registry should use system assigned identify
• Changes should be automatically available in function app after the pushing image to container registry
• For the sample app use python-sample-vscode-flask-tutorial/Dockerfile at master · microsoft/python-sample-vscode-flask-tutorial · GitHub

#Implementation
1. Created Terraform code for creating the Infrastructure

The following services are created
    a. Azure Monitor - Log analytics workspace for storing all the logs for this assignment
    b. Application Insights - for the function app to share telemetry information
    c. Azure Container Registry - with User Assigned managed Identity & roles
    d. Storage account - to store diagnostic settings 
    e. Azure Function App - Linux with App Service Plan
    f. App Service Plan - For teh function app

| Azure Service                          | Description                                                           |
|----------------------------------------|-----------------------------------------------------------------------|
| Azure Monitor                          | Log analytics workspace for storing all the logs for this assignment  |
| Application Insights                   | for the function app to share telemetry information                   |
| Azure Container Registry               | with User Assigned managed Identity & roles                           |
| Storage account                        | to store diagnostic settings                                          |
| Azure Function App                     | Linux with App Service Plan                                           |
| App Service Plan                       | For the function app                                                  |

2. Changes should be automatically available in function app after the pushing image to container registry - To achieve this CI_CD_URL has been generated by the Azure function app and a webhook has been created in Azure COntainer Registry to push the latest changes to Azure Function App 

#See screenshot below for the Azure resources created using terraform commands
<<<<<<< HEAD
Azure Resources - Check image here - https://dev.azure.com/senthilr78/NNAssignment/_git/NNAssignment?version=GBmain&path=/images/AzureResources.jpg
=======
>>>>>>> f2006516fcbe91213f597fd79675435e048b79c7
[Azure Resources](https://dev.azure.com/senthilr78/NNAssignment/_git/NNAssignment?version=GBmain&path=/images/AzureResources.jpg)
#CI/CD Pipelines for Infrastructure
Created Infrastructure pipeline to create Azure resources - https://dev.azure.com/senthilr78/NNAssignment/_git/NNAssignment?path=/pipeline/azure-infra-pipeline.yml

#CD Pipeline for Python App
https://dev.azure.com/senthilr78/NNAssignment/_git/NNAssignment?path=/pipeline/azure-deploy-pipeline.yml

Note: The CI/CD Pipeline was not tested due to time constraints & Azure DevOps - Parallel jobs issue (The execution of the pipeline is blocked initially and upon request, this is provided)
